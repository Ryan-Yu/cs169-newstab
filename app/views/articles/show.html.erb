
<div class="article-show">
  
  <div class="article-categories">
    <b>Categories</b>:
    <% @article.categories.each do |category| %>
      | <%= category.name %>
    <% end %>
  </div>
  
  <h1><%= @article.title %></h1>
  
  <!-- Show photo only if it was pulled successfully with Pismo -->
  <% unless @article.photo.nil? or @article.photo.empty? %>
   <%= image_tag @article.photo, :class => "article-picture" %>
  <% end %> 
  
  <br />
  
  <row>
    <div class="col-md-8">
      <!-- Article content -->
      <div class="article-content">
        <%= @article.content.html_safe unless @article.content.blank? %>
      </div>
      
      <%= link_to 'Edit', edit_article_path(@article) %> |
      <%= link_to 'Back', articles_path %>
      
      <br /><br />
    </div>
    
    <div class="col-md-4">
      <!-- Display who posted the article -->
      <div class="article-posted-by">
        Posted <%= time_ago_in_words(@article.created_at) %> ago by: <%= @article.user.first_name %> <%= @article.user.last_name %>
      </div>
      
      <br />
      
      <strong>Number of Likes:</strong>
      <%= @article.likes.size %>
      
      <%= render 'likes/likes_form' %>
      
      <br /><br />
      
      <%= link_to 'Edit Article', edit_article_path(@article) %>
      <%= link_to 'Destroy Article', @article, method: :delete, data: { confirm: 'Are you sure?' } %>
      
      <br /><br />
      
      <%= @article.url %>
      
      <br /><br />
      
      <% if @article.comments.count > 0 %>
      
      <div class="article-comments">
        <b>Post comments:</b>
        
        <hr />
        
        <% @article.comments.each do |comment| %>
          <div class="article-comment-body">
            <%= comment.body %>
          </div>
          
          <i>
            (posted <%= time_ago_in_words(comment.created_at) %> ago by <a href=<%= user_path(comment.user.id) %>><%= comment.user.first_name %></a>)
          </i>

          <br />
          
          <% if comment.posted_by? current_user %>
            <td><%= link_to "Delete", article_comment_path(@article, comment), method: :delete, data: { confirm: 'Are you sure?' }, :id => "delete_comment" %></td>
          <% end %>
          
          <hr />
        <% end %>
      </div>
      
      <% else %>
        <b>No comments.</b>
      <% end %>
      
      <%= form_for ([@article, @article.comments.build]) do |f| %>
        <div class="field">
          <%= f.text_area :body, placeholder: "Compose new comment...", :id => "comment_box" %>
        </div>
        <%= f.submit "Post" %>
      <% end %>
      
      
    </div>
  </row>
  
  <br /><br />

</div>